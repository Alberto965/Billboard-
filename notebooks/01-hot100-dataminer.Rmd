---
title: "Download gap Hot 100 data"
output: html_notebook
---

This notebooks downloads some supplemental data for Billboard Hot 100 charts.

Brief background: The most up-to-date archive of data I can find of as of 2022-01-08 is [Billboard "The Hot 100" Songs](https://www.kaggle.com/dhruvildave/billboard-the-hot-100-songs) on by Dhruvil Dave on Kaggle. The problem is it is missing 2021 past the 2021-11-06 chart.

So I built a recipe using Data Miner to scrape the chart and manually did so to fill in the gap weeks through the rest of 2021. I stored it in a [Google Sheet](https://docs.google.com/spreadsheets/d/1in--HfDYfijzQha8PSP4ItaKND9_rzx8pFPVHaZi-hE/edit#gid=0) and I download that data here to put into the repo.

Here I download the data from Google sheets and clean it in preparation of binding with the Kaggle data.


```{r setup, echo=T, results='hide', message=F, warning=F}
library(tidyverse)
```

## Download

Download the file and put in in the `data-download` folder. The line is commented out for now.

```{r download}

download.file("https://docs.google.com/spreadsheets/d/e/2PACX-1vS51nRQBDdnfTEDznKm-1Vfo7MGdWNXblPuG1yPtjwcuxdf_JoM2v1P5vh67rdfvDHW_o1tckafU3Rb/pub?gid=0&single=true&output=csv", "../data-download/hot100-late2021-dataminer.csv")

```

## Import

```{r import}
raw <- read_csv("../data-download/hot100-late2021-dataminer.csv")

raw %>% glimpse()
```

Peek at it

```{r peek}
raw %>% head()
```

## Clean the data

The previous week columns has `-` to indicate missing data, making them characters.

```{r}
gap_data <- raw %>% 
  mutate(
    last_week = last_week %>% as.numeric()
  )

gap_data %>% glimpse()
```

## Export

```{r export}
gap_data %>% write_rds("../data-process/hot-100/hot100-kaggle-gap2021.rds")
```


